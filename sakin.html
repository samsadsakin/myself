<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dynamic Profile — Interactive Template</title>
  <style>
    :root{
      --bg:#f3f4f6; --card:#ffffff; --muted:#6b7280; --accent:#2563eb; --glass: rgba(255,255,255,0.6);
    }
    [data-theme="dark"]{ --bg:#0b1020; --card:#0f1724; --muted:#9ca3af; --accent:#60a5fa; --glass: rgba(255,255,255,0.04);} 

    *{box-sizing:border-box}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:linear-gradient(180deg,var(--bg),#e9eefb); min-height:100vh; padding:28px; color:var(--muted)}

    .app{max-width:980px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:20px;align-items:start}
    .panel{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 6px 18px rgba(25, 35, 50, 0.06);}

    /* left column */
    .profile-top{display:flex;flex-direction:column;gap:12px;align-items:center}
    .avatar{width:128px;height:128px;border-radius:18px;overflow:hidden;background:linear-gradient(135deg,#eef2ff,#fef3c7);display:flex;align-items:center;justify-content:center;font-weight:700;color:#111}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .name{font-size:20px;color:var(--accent);font-weight:700}
    .role{font-size:13px;color:var(--muted)}

    .btn{display:inline-block;padding:8px 12px;border-radius:10px;background:var(--accent);color:white;text-decoration:none;font-weight:600;cursor:pointer;border:none}
    .muted{color:var(--muted);font-size:13px}

    .field{margin:8px 0}
    .field input, .field textarea, .field select{width:100%;padding:8px;border-radius:8px;border:1px solid #e6eef9;background:transparent}

    .skills{display:grid;grid-template-columns:1fr;gap:10px}
    .skill{display:flex;align-items:center;gap:12px}
    .skill .bar{flex:1;height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .skill .bar > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#7c3aed);width:40%}

    /* right column */
    .header-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .card{padding:14px;border-radius:12px}
    .bio{white-space:pre-wrap;line-height:1.5;color:var(--muted)}

    .stats{display:flex;gap:10px}
    .stat{flex:1;background:var(--glass);padding:10px;border-radius:12px;text-align:center}
    .stat .v{font-weight:700;color:var(--accent)}

    .actions{display:flex;gap:8px;}

    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* small screens */
    @media (max-width:900px){ .app{grid-template-columns:1fr} .avatar{width:96px;height:96px} }
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="panel">
      <div class="profile-top">
        <div class="avatar" id="avatar"> <span id="avatar-initial">ME</span> </div>
        <div style="text-align:center">
          <div class="name" id="display-name">Your Name</div>
          <div class="role" id="display-role">Your Role</div>
        </div>
      </div>

      <hr style="margin:14px 0;border:none;border-top:1px solid #eef2f8">

      <div>
        <label class="muted">Upload photo</label>
        <input type="file" id="photo" accept="image/*" class="field" />
        <div style="height:8px"></div>

        <label class="muted">Full name</label>
        <input id="name" placeholder="e.g. Ikram Khan" />

        <label class="muted">Role / Title</label>
        <input id="role" placeholder="e.g. Frontend Developer" />

        <label class="muted">Location</label>
        <input id="location" placeholder="e.g. Dhaka, Bangladesh" />

        <label class="muted">Short bio</label>
        <textarea id="bio" rows="3" placeholder="Write a short bio..."></textarea>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn" id="saveBtn">Save</button>
          <button class="btn" id="resetBtn" style="background:#ef4444">Reset</button>
        </div>
      </div>

      <hr style="margin:14px 0;border:none;border-top:1px solid #eef2f8">

      <div>
        <label class="muted">Skills</label>
        <div id="skillsList" class="skills">
          <!-- generated -->
        </div>
        <div style="display:flex;gap:8px;margin-top:10px">
          <input id="skillName" placeholder="Skill name" />
          <input id="skillLevel" placeholder="0-100" type="number" min="0" max="100" style="width:90px" />
          <button class="btn" id="addSkill">Add</button>
        </div>
      </div>

      <hr style="margin:14px 0;border:none;border-top:1px solid #eef2f8">

      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="muted">Theme</div>
        <div class="actions">
          <button id="themeToggle" class="btn" style="background:#111;color:#fff">Toggle</button>
        </div>
      </div>

    </div>

    <div class="panel card">
      <div class="header-row">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:74px;height:74px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#fef3c7,#fce7f3);display:flex;align-items:center;justify-content:center" id="preview-avatar"> <img id="previewImg" alt="avatar" style="width:100%;height:100%;object-fit:cover;display:none"> <span id="previewInitial">ME</span></div>
          <div>
            <div style="font-size:20px;font-weight:700;color:var(--accent)" id="pName">Your Name</div>
            <div class="muted" id="pRole">Developer • Dhaka</div>
          </div>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn" id="exportJson">Export JSON</button>
          <button class="btn" id="clearStorage" style="background:#ef4444">Clear</button>
        </div>
      </div>

      <div style="margin-top:14px" class="bio card"> <div id="pBio">This is where your bio goes. Keep it short and sweet.</div></div>

      <div style="display:flex;gap:12px;margin-top:14px">
        <div class="stat">
          <div class="muted">Projects</div>
          <div class="v" id="statProjects">12</div>
        </div>
        <div class="stat">
          <div class="muted">Followers</div>
          <div class="v" id="statFollowers">540</div>
        </div>
        <div class="stat">
          <div class="muted">Experience</div>
          <div class="v" id="statXP">3 yr</div>
        </div>
      </div>

      <div style="margin-top:18px">
        <div class="muted">Skill highlights</div>
        <div id="pSkills" style="margin-top:8px"></div>
      </div>

      <footer>Tip: edits are saved to your browser localStorage. Export to back up.</footer>
    </div>
  </div>

  <script>
    // --- Helpers & state ---
    const stateKey = 'dynProfile.v1'
    let state = {
      name: 'Your Name', role: 'Your Role', location:'', bio:'This is a short bio about you.',
      avatar: null, skills: [ {name:'HTML', level:80}, {name:'CSS', level:75}, {name:'JavaScript', level:68} ], stats:{projects:12, followers:540, xp:'3 yr'}, theme:'light'
    }

    // --- DOM refs ---
    const els = {
      name: document.getElementById('name'), role: document.getElementById('role'), location: document.getElementById('location'), bio: document.getElementById('bio'),
      displayName: document.getElementById('display-name'), displayRole: document.getElementById('display-role'), avatar: document.getElementById('avatar'), avatarInitial: document.getElementById('avatar-initial'),
      skillsList: document.getElementById('skillsList'), pSkills: document.getElementById('pSkills'), pName: document.getElementById('pName'), pRole: document.getElementById('pRole'), pBio: document.getElementById('pBio'),
      previewAvatar: document.getElementById('preview-avatar'), previewImg: document.getElementById('previewImg'), previewInitial: document.getElementById('previewInitial'), photo: document.getElementById('photo'),
      saveBtn: document.getElementById('saveBtn'), resetBtn: document.getElementById('resetBtn'), addSkill: document.getElementById('addSkill'), skillName: document.getElementById('skillName'), skillLevel: document.getElementById('skillLevel'),
      exportJson: document.getElementById('exportJson'), clearStorage: document.getElementById('clearStorage'), themeToggle: document.getElementById('themeToggle')
    }

    // --- Persistence ---
    function load(){
      try{
        const raw = localStorage.getItem(stateKey)
        if(raw) state = JSON.parse(raw)
      }catch(e){console.warn('load failed', e)}
    }
    function save(){ localStorage.setItem(stateKey, JSON.stringify(state)); render(); }
    function reset(){ localStorage.removeItem(stateKey); state = { name:'Your Name', role:'Your Role', location:'', bio:'This is a short bio about you.', avatar:null, skills:[{name:'HTML',level:80},{name:'CSS',level:75},{name:'JavaScript',level:68}], stats:{projects:12,followers:540,xp:'3 yr'}, theme:'light' }; render(); }

    // --- Rendering ---
    function render(){
      // left form
      els.name.value = state.name
      els.role.value = state.role
      els.location.value = state.location
      els.bio.value = state.bio
      els.displayName.textContent = state.name
      els.displayRole.textContent = state.role

      // avatar preview
      if(state.avatar){ els.avatar.innerHTML = `<img src="${state.avatar}" alt="avatar"/>`; els.previewImg.src = state.avatar; els.previewImg.style.display='block'; els.previewInitial.style.display='none'; els.avatarInitial.style.display='none' }
      else{ const initials = initialsFrom(state.name); els.avatar.innerHTML = `<span id='avatar-initial'>${initials}</span>`; els.previewImg.style.display='none'; els.previewInitial.textContent = initials; els.previewInitial.style.display='inline-block' }

      // skills
      els.skillsList.innerHTML = ''
      state.skills.forEach((s, idx)=>{
        const d = document.createElement('div'); d.className='skill';
        const name = document.createElement('div'); name.style.minWidth='90px'; name.textContent = s.name; name.className='muted'
        const barWrap = document.createElement('div'); barWrap.className='bar'; const inner = document.createElement('i'); inner.style.width = s.level + '%'; barWrap.appendChild(inner)
        const del = document.createElement('button'); del.textContent='✕'; del.style.border='none'; del.style.background='transparent'; del.style.cursor='pointer'; del.title='remove'; del.onclick = ()=>{ state.skills.splice(idx,1); save(); }
        d.appendChild(name); d.appendChild(barWrap); d.appendChild(del); els.skillsList.appendChild(d)
      })

      // right side
      els.pName.textContent = state.name
      els.pRole.textContent = `${state.role}${state.location ? ' • ' + state.location : ''}`
      els.pBio.textContent = state.bio
      els.pSkills.innerHTML = state.skills.map(s=>`<div style="display:inline-block;padding:6px 8px;border-radius:999px;background:var(--glass);margin-right:8px;font-weight:600">${s.name} ${s.level}%</div>`).join('')

      // stats
      document.getElementById('statProjects').textContent = state.stats.projects
      document.getElementById('statFollowers').textContent = state.stats.followers
      document.getElementById('statXP').textContent = state.stats.xp

      // theme
      document.documentElement.setAttribute('data-theme', state.theme || 'light')
    }

    function initialsFrom(name){ if(!name) return 'ME'; const parts = name.trim().split(/\s+/); if(parts.length===1) return parts[0].slice(0,2).toUpperCase(); return (parts[0][0]+(parts[1] ? parts[1][0]: '')).toUpperCase() }

    // --- Events ---
    els.saveBtn.addEventListener('click', ()=>{ state.name = els.name.value || 'Your Name'; state.role = els.role.value || 'Your Role'; state.location = els.location.value||''; state.bio = els.bio.value||''; save(); alert('Profile saved locally.') })
    els.resetBtn.addEventListener('click', ()=>{ if(confirm('Reset profile to defaults?')) reset(); })

    els.addSkill.addEventListener('click', ()=>{
      const n = els.skillName.value.trim(); const l = parseInt(els.skillLevel.value)||0; if(!n) return alert('Skill name required'); state.skills.unshift({name:n, level:Math.min(100, Math.max(0,l))}); els.skillName.value=''; els.skillLevel.value=''; save();
    })

    els.photo.addEventListener('change', (e)=>{
      const f = e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ()=>{ state.avatar = reader.result; save(); } reader.readAsDataURL(f)
    })

    els.exportJson.addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = (state.name || 'profile').replace(/\s+/g,'_').toLowerCase()+'.json'; a.click(); URL.revokeObjectURL(url);
    })

    els.clearStorage.addEventListener('click', ()=>{ if(confirm('Clear saved profile from this browser?')){ reset(); localStorage.removeItem(stateKey); alert('Cleared.') } })

    els.themeToggle.addEventListener('click', ()=>{ state.theme = (state.theme==='light') ? 'dark' : 'light'; save(); })

    // allow live-preview as user types
    ['name','role','location','bio'].forEach(id=>{ document.getElementById(id).addEventListener('input', ()=>{ state[id] = document.getElementById(id).value; render(); }) })

    // quick save on unload
    window.addEventListener('beforeunload', ()=>{ localStorage.setItem(stateKey, JSON.stringify(state)) })

    // init
    load(); render();
  </script>
</body>
</html>